workflow_id: sam_matting
version: "1.0.0"
name: "SAM æ™ºèƒ½æŠ å›¾"
description: "ä½¿ç”¨ Segment Anything Model è¿›è¡Œæ™ºèƒ½å›¾åƒæŠ å›¾"

inputs:
  - name: image
    type: image
    required: true
    label: "åŸå§‹å›¾åƒ"
    description: "éœ€è¦æŠ å›¾çš„å›¾åƒ"
    accept: [".jpg", ".png", ".jpeg", ".webp"]
    node_id: "2"
    node_param: "image"

  - name: mask
    type: image
    required: true
    label: "è’™ç‰ˆå›¾åƒ"
    description: "æŒ‡ç¤ºéœ€è¦ä¿ç•™çš„åŒºåŸŸï¼ˆç™½è‰²åŒºåŸŸä¼šè¢«ä¿ç•™ï¼‰"
    accept: [".png", ".jpg", ".jpeg"]
    node_id: "2"
    node_param: "mask"

parameters:
  - name: mask_threshold
    type: float
    label: "æ£€æµ‹é˜ˆå€¼"
    description: "SAM æ¨¡å‹æ£€æµ‹çš„ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œè¶Šé«˜è¶Šç²¾ç¡®ä½†å¯èƒ½é—æ¼ç»†èŠ‚"
    default: 0.6
    min: 0.1
    max: 1.0
    step: 0.1
    node_id: "10"
    node_param: "mask_hint_threshold"
    category: "åŸºç¡€å‚æ•°"

  - name: blur_radius
    type: float
    label: "è¾¹ç¼˜æ¨¡ç³Š"
    description: "è¾¹ç¼˜ç¾½åŒ–åŠå¾„ï¼Œå€¼è¶Šå¤§è¾¹ç¼˜è¶ŠæŸ”å’Œ"
    default: 1.0
    min: 0.0
    max: 5.0
    step: 0.1
    node_id: "23"
    node_param: "blur_radius"
    category: "åŸºç¡€å‚æ•°"

  - name: kernel_size
    type: int
    label: "å½¢æ€å­¦æ ¸å¤§å°"
    description: "ç”¨äºå¡«å……è’™ç‰ˆå†…å­”æ´çš„æ ¸å¤§å°ï¼Œå€¼è¶Šå¤§å¡«å……æ•ˆæœè¶Šå¼º"
    default: 6
    min: 2
    max: 15
    step: 1
    node_id: "43"
    node_param: "kernel_size"
    category: "é«˜çº§å‚æ•°"

  - name: expand
    type: int
    label: "è’™ç‰ˆæ‰©å±•"
    description: "æ­£å€¼æ‰©å±•è’™ç‰ˆï¼ˆå‘å¤–ï¼‰ï¼Œè´Ÿå€¼æ”¶ç¼©è’™ç‰ˆï¼ˆå‘å†…ï¼‰"
    default: -3
    min: -10
    max: 10
    step: 1
    node_id: "23"
    node_param: "expand"
    category: "é«˜çº§å‚æ•°"

  - name: detection_hint
    type: select
    label: "æ£€æµ‹æç¤ºç‚¹"
    description: "SAM æ£€æµ‹æ—¶ä½¿ç”¨çš„æç¤ºç‚¹æ•°é‡"
    default: "center-1"
    options:
      - value: "center-1"
        label: "ä¸­å¿ƒ 1 ç‚¹"
      - value: "center-2"
        label: "ä¸­å¿ƒ 2 ç‚¹"
      - value: "center-3"
        label: "ä¸­å¿ƒ 3 ç‚¹"
    node_id: "10"
    node_param: "detection_hint"
    category: "é«˜çº§å‚æ•°"

presets:
  portrait:
    name: "äººåƒæ¨¡å¼"
    icon: "ğŸ‘¤"
    description: "é€‚åˆäººåƒæŠ å›¾ï¼Œä¿ç•™æŸ”å’Œè¾¹ç¼˜å’Œç»†èŠ‚"
    params:
      mask_threshold: 0.7
      blur_radius: 2.5
      kernel_size: 6
      expand: -4
      detection_hint: "center-1"

  product:
    name: "äº§å“æ¨¡å¼"
    icon: "ğŸ“¦"
    description: "é€‚åˆäº§å“å›¾æŠ å›¾ï¼Œè¾¹ç¼˜æ¸…æ™°é”åˆ©"
    params:
      mask_threshold: 0.6
      blur_radius: 0.3
      kernel_size: 10
      expand: -1
      detection_hint: "center-2"

  hair:
    name: "æ¯›å‘æ¨¡å¼"
    icon: "ğŸ’‡"
    description: "é€‚åˆæœ‰å¤æ‚æ¯›å‘çš„å¯¹è±¡ï¼Œè¾¹ç¼˜æ›´æŸ”å’Œ"
    params:
      mask_threshold: 0.6
      blur_radius: 1.5
      kernel_size: 6
      expand: -1
      detection_hint: "center-1"

  high_quality:
    name: "é«˜è´¨é‡"
    icon: "â­"
    description: "æœ€é«˜è´¨é‡è®¾ç½®ï¼Œå¤„ç†æ—¶é—´è¾ƒé•¿"
    params:
      mask_threshold: 0.75
      blur_radius: 2.0
      kernel_size: 8
      expand: -2
      detection_hint: "center-3"

  fast:
    name: "å¿«é€Ÿæ¨¡å¼"
    icon: "âš¡"
    description: "å¿«é€Ÿå¤„ç†ï¼Œé€‚åˆé¢„è§ˆ"
    params:
      mask_threshold: 0.5
      blur_radius: 0.5
      kernel_size: 4
      expand: -2
      detection_hint: "center-1"

outputs:
  - name: result
    type: image
    label: "æŠ å›¾ç»“æœ"
    description: "å¸¦é€æ˜èƒŒæ™¯çš„æŠ å›¾ç»“æœï¼ˆPNG æ ¼å¼ï¼‰"
    node_id: "22"
    format: "png"
